<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1">

{%- liquid
  assign base_title = page_title | default: shop.name
  assign base_description = page_description | default: shop.description | default: shop.name

  comment
    Homepage SEO overrides (set in settings) â€“ only applied on index template
  endcomment
  if template.name == 'index'
    if settings.home_meta_title and settings.home_meta_title != ''
      assign base_title = settings.home_meta_title
    endif
    if settings.home_meta_description and settings.home_meta_description != ''
      assign base_description = settings.home_meta_description
    endif
  endif

  comment
    Product page dynamic SEO overrides
    Pattern (Title):  Buy a <sex> <Primary Collection Title> Puppy - Designer & Purebred Puppies for Sale
    Pattern (Description): Take home <Product Title>, or any of the other <Primary Collection Title> puppies. Puppys R Us works closely with responsible dog breeders to offer healthy designer & purebred puppies for sale to loving homes.
  endcomment
  if request.page_type == 'product' and product
    assign primary_collection = product.collections.first
    assign product_sex = product.metafields.custom.sex.value | default: ''
    if product_sex != '' and primary_collection
      assign base_title = 'Buy a ' | append: product_sex | append: ' ' | append: primary_collection.title | append: ' Puppy - Designer & Purebred Puppies for Sale'
    elsif primary_collection
      assign base_title = 'Buy a ' | append: primary_collection.title | append: ' Puppy - Designer & Purebred Puppies for Sale'
    endif

    if primary_collection
      assign base_description = 'Take home ' | append: product.title | append: ', or any of the other ' | append: primary_collection.title | append: ' puppies. Puppys R Us works closely with responsible dog breeders to offer healthy designer & purebred puppies for sale to loving homes.'
    else
      assign base_description = 'Take home ' | append: product.title | append: '. Puppys R Us works closely with responsible dog breeders to offer healthy designer & purebred puppies for sale to loving homes.'
    endif
  endif

  assign og_title = base_title
  assign og_url = canonical_url | default: request.origin
  assign og_type = 'website'
  assign og_description = base_description

  if request.page_type == 'product'
    assign og_type = 'product'
  elsif request.page_type == 'article'
    assign og_type = 'article'
  elsif request.page_type == 'password'
    assign og_url = request.origin
  endif
-%}

<meta
  property="og:site_name"
  content="{{ shop.name }}"
>
<meta
  property="og:url"
  content="{{ og_url }}"
>
<meta
  property="og:title"
  content="{{ og_title | escape }}"
>
<meta
  property="og:type"
  content="{{ og_type }}"
>
<meta
  property="og:description"
  content="{{ og_description | escape }}"
>

{%- if page_image -%}
  <meta
    property="og:image"
    content="http:{{ page_image | image_url }}"
  >
  <meta
    property="og:image:secure_url"
    content="https:{{ page_image | image_url }}"
  >
  <meta
    property="og:image:width"
    content="{{ page_image.width }}"
  >
  <meta
    property="og:image:height"
    content="{{ page_image.height }}"
  >
{%- endif -%}

{%- if request.page_type == 'product' -%}
  <script type="application/ld+json">
    {{ product | structured_data }}
  </script>

  <meta
    property="og:price:amount"
    content="{{ product.price | money_without_currency | strip_html }}"
  >
  <meta
    property="og:price:currency"
    content="{{ cart.currency.iso_code }}"
  >
{%- endif -%}

<meta
  name="twitter:card"
  content="summary_large_image"
>
<meta
  name="twitter:title"
  content="{{ og_title | escape }}"
>
<meta
  name="twitter:description"
  content="{{ og_description | escape }}"
>

<title>
  {{ base_title }}
  {%- if current_tags %} &ndash; tagged "{{ current_tags | join: ', ' }}"{% endif -%}
  {%- if current_page != 1 %} &ndash; Page {{ current_page }}{% endif -%}
  {%- unless base_title contains shop.name %} &ndash; {{ shop.name }}{% endunless -%}
</title>

<link
  rel="canonical"
  href="{{ canonical_url }}"
>

{% if base_description %}
  <meta
    name="description"
    content="{{ base_description | escape }}"
  >
{% endif %}
