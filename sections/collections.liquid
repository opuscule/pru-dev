{% comment %}
    This section is used in the list-collections template to render a list of
    collections.

    https://shopify.dev/docs/storefronts/themes/architecture/templates/collection
{% endcomment %}

<h1 class="mb-6">{{ 'collections.title' | t }}</h1>

{%- liquid
    assign card_size = '280px'
    if section.settings.grid_item_width == 'collections--compact'
        assign card_size = '160px'
    endif
-%}

<div
    class="grid w-full"
    style="gap: {{ section.settings.grid_gap }}px; grid-template-columns: repeat(auto-fill, minmax(min({{ card_size }}, 100%), 1fr));"
>
    {% for collection in collections %}
        <a class="flex flex-col w-full" href="{{ collection.url }}">
            <div class="collection-card__content">
                <p>{{ collection.title }}</p>

                {% if collection.description %}
                    <p>{{ collection.description | strip_html | truncatewords: 15 }}</p>
                {% endif %}
            </div>
        </a>
    {% endfor %}
</div>

{% schema %}
{
    "name": "t:general.collections_grid",
    "settings": [
        {
            "type": "select",
            "id": "grid_item_width",
            "label": "t:labels.grid_item_width",
            "options": [
                { "value": "collections--compact", "label": "t:options.size.small" },
                { "value": "collections--full", "label": "t:options.size.large" }
            ],
            "default": "collections--full"
        },
        {
            "type": "range",
            "id": "grid_gap",
            "label": "t:labels.grid_gap",
            "min": 0,
            "max": 50,
            "step": 5,
            "unit": "px",
            "default": 10
        }
    ],
    "presets": [{ "name": "t:general.collections_grid" }]
}
{% endschema %}
