{% comment %}
  This section is used in the cart template to render /cart page with an
  overview of the items in customer's cart.

  https://shopify.dev/docs/storefronts/themes/architecture/templates/cart
{% endcomment %}


  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #ef6859;
            --secondary-color: oklch(.69 .16 28.69);
            --theme-light: #efebdc;
            --gray-light: #f5f2e9;
            --black-color: #2a2a2a;
            --white-color: #ffffff;


            --border-radius: .3rem;
        }
button.btn.btn-minus {
    margin-bottom: 5px;
}
button.btn.btn-plus {
    margin-bottom: 5px;
}

.waves_separator_svg {
    line-height: 0;
    transform: rotateX(180deg);
    margin-top: -1px;
}

.bg-secondary {
    background-color: oklch(.7057 .158 124.46) !important;
}

.btns-cart {
    border: 2px solid #e74c3c;
    border-radius: 10rem;
    padding: .75rem 2.25rem;
    font-size: 1.125rem;
    font-weight: 500;
    border-width: 2px;
    border-style: solid;
    color: #e74c3c;
}
.btns-cart:hover{
 background-color:#e74c3c;
 color:#fff;
}

        body {
            overflow: hidden;
            overflow-y: auto;
        }

        .section-space {
            padding: 5rem 0;
        }

        .section-space-top {
            padding-top: 5rem;
        }

        .section-space-bottom {
            padding-bottom: 5rem;
        }

        .form-check-label {
            cursor: pointer;
            user-select: none;
        }

        .bg-theme-light {
            background-color: var(--theme-light);
        }

        .btn {
            border-radius: 50px;
            padding: 0.35rem 1.5rem;
            display: inline-block;
        }

        /* .btn-theme */
        .btn.btn-theme {
            background-color: var(--primary-color);
            color: var(--white-color);
        }

        .btn.btn-theme:hover {
            background-color: var(--primary-color);
        }


        /* .btn-bordered */
        .btn.btn-bordered {
            border: 1px solid var(--white-color);
            color: var(--primary-color);
        }

        .btn.btn-bordered:hover {
            border: 1px solid var(--white-color);
            color: var(--primary-color);
        }

        .order-summary {
            background-color: var(--gray-light);
            border: 1px solid var(--primary-color);
            padding: 1rem;
            border-radius: var(--border-radius);
        }
        .order-summary .form-check{
            border: 1px solid var(--primary-color);
            padding: .5rem .5rem .5rem 2rem;
            border-radius: var(--border-radius);
        }

        .order-summary ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .order-summary ul li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--white-color);
        }

        .order-summary ul li.total {
            font-size: 1.25rem;
            font-weight: 400;
            color: var(--primary-color);
            border-bottom: none !important;
            margin-bottom: 1rem;
        }

        .cart-quantity {
            max-width: 9rem;
            background-color: var(--primary-color);
            color: var(--white-color);
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50px;
            padding: 0.15rem 0.5rem;
            color: var(--white-color);
        }

        .cart-quantity input {
            max-width: 5rem;
            background-color: transparent;
            border: none;
            color: var(--white-color);
            text-align: center;
        }

        .cart-quantity input:focus {
            border: 1px solid var(--white-color) !important;
            outline: none !important;
        }

        .cart-quantity button {
            background-color: transparent;
            border: none;
            color: var(--white-color);
            font-size: 1.5rem;
            padding: 0 0.5rem;
            cursor: pointer;
        }

        .cart-quantity button:focus {
            box-shadow: none;
        }

        .buy-product-pod {
            background-color: var(--gray-light);
            padding: 0.25rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--primary-color);
        }

        .buy-product-pod .buy-col {
            width: 100%;
            height: 100%;
        }

        .buy-product-pod .buy-col.col-two {
            display: flex;
            align-items: center;
            padding: 1rem 0;
        }

        .buy-product-pod .buy-col.col-two .product-title {
            color: var(--primary-color);
            font-size: 1.5rem;
            font-weight: 600;
        }

        .buy-product-pod .buy-col.col-three {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            padding: 1rem 0;
            border-left: 1px solid var(--primary-color);
        }

        .buy-product-pod .cart-quantity .btn:hover {

            color: var(--white-color);
        }

        /* 
        .buy-product-pod .cart-quantity {
            max-width: 9rem;
            background-color: var(--color_secondary);
            color: var(--color_white);
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50px;
            padding: 0.15rem 0.5rem;
            color: var(--color_white);
        }

        .buy-product-pod .cart-quantity input {
            max-width: 5rem;
            background-color: transparent;
            border: none;
            color: var(--color_white);
            text-align: center;
        }

        .buy-product-pod .cart-quantity input:focus {
            border: 1px solid var(--color_white) !important;
            outline: none !important;
        }

        .buy-product-pod .cart-quantity button {
            background-color: transparent;
            border: none;
            color: var(--color_white);
            font-size: 1.5rem;
            padding: 0 0.5rem;
            cursor: pointer;
        }

        .buy-product-pod .cart-quantity button:focus {
            box-shadow: none;
        } */

        .buy-product-pod figure {
            margin: 0;
            width: 100%;
            height: 100%;
            position: relative;
        }

        .buy-product-pod figure .badge {
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
            padding: 0.1rem 0.75rem;
            color: var(--color_white);
            font-size: 0.9rem;
        }

        .buy-product-pod figure img {
            width: 100%;
            height: 100%;
            max-height: 290px;
            object-fit: cover;
            border-radius: var(--border-radius);
        }

        .buy-product-pod .two-line-clamp {
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 1.4em;
            max-width: 20rem;
        }

        
        .buy-product-pod ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .buy-product-pod ul li:last-child{
            font-size: 1.25rem;
            color: var(--white-color);
            background-color: var(--primary-color);
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            margin-top: 1rem;
        }

        .buy-product-pod ul strong {
            color: var(--color_theme);
            margin-right: 0.5rem;
        }
    </style>



<section class="buy-pod-wrap bg-theme-light section-space" data-cart-section>
  <div class="container">
      <h1 class="text-center font-bold mb-8 text-4xl sm:text-5xl md:text-6xl lg:text-7xl 2xl:text-8xl">{{ 'cart.title' | t }}</h1>
    <div class="buy-pod-inner">
      <form action="{{ routes.cart_url }}" method="post" novalidate class="cart-form">
        <div class="row">
          <div class="col-lg-9">
            {% if cart.item_count == 0 %}
              <p>Your cart is empty.</p>
            {% else %}

              {% for item in cart.items %}
                {% assign gender = item.properties.Gender | default: item.product.metafields.custom.gender %}
                {% assign age    = item.properties.Age    | default: item.product.metafields.custom.age %}
                {% assign breed  = item.properties.Breed  | default: item.product.metafields.custom.breed | default: item.product.type %}
                {% assign unit_price = item.final_line_price | divided_by: item.quantity %}

                <div class="buy-product-pod mb-3" data-line="{{ item.key }}">
                  <div class="row">
                    <div class="col-lg-3 col-lg-3">
                      <div class="buy-col col-one">
                        <figure>
                          <a href="{{ item.url }}">
                            {% if item.image %}
                              <img src="{{ item.image | image_url: width: 360 }}" alt="{{ item.title | escape }}" loading="lazy">
                            {% else %}
                              {{ 'product-apparel-1' | placeholder_svg_tag }}
                            {% endif %}
                          </a>
                        </figure>
                      </div>
                    </div>

                    <div class="col-lg-6">
                      <div class="buy-col col-two">
                        <div class="product-description">
                          <code>#{{ item.sku }}</code>
                          <h2 class="font-bold text-4xl"><a href="{{ item.url }}" style="color: #000;text-decoration: none;">{{ item.product.title }}</a></h2>
                            {% assign dob_val = item.product.metafields.custom.dob.value %}
                            {% assign dob_ts = dob_val | date: "%s" | plus: 0 %}
                            {% assign now_ts = 'now' | date: "%s" | plus: 0 %}
                            {% assign diff_seconds = now_ts | minus: dob_ts %}
                            {% assign weeks_old = diff_seconds | divided_by: 604800 %}

                            <ul>
                            <li><strong>Sex :</strong>{{ item.product.metafields.custom.sex }}</li>
                            {% assign first_collection = item.product.collections | first %}
                            {% if first_collection %}
                              <li><strong>Breed :</strong> {{ first_collection.title }}</li>
                            {% endif %}
                            <li><strong>DOB :</strong>{{ item.product.metafields.custom.dob }}</li>
                            <li><strong>Age :</strong>{{ weeks_old | floor }} Weeks Old</li>
                            <li><strong>Price</strong> {{ unit_price | money }}</li>
                          </ul>

                          {% if item.properties and item.properties.size > 0 %}
                            <details class="mt-2">
                              <summary>Details</summary>
                              <ul style="margin:8px 0 0 0;">
                                {% for p in item.properties %}
                                  {% unless p.last == blank %}
                                    <li><strong>{{ p.first }}:</strong> {{ p.last }}</li>
                                  {% endunless %}
                                {% endfor %}
                              </ul>
                            </details>
                          {% endif %}
                          <a href="{{ routes.cart_change_url }}?line={{ forloop.index }}&quantity=0" class="btn-link remove-line mt-2" style="color: var(--primary-color);text-decoration: none;font-size: 0.8rem;">Remove</a>
                          <!--<button class="btn-link remove-line mt-2" style="color: var(--primary-color);text-decoration: none;font-size: 0.8rem;" name="updates[{{ item.key }}]" value="0" type="submit" aria-label="Remove {{ item.product.title }}">Remove</button>-->
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-3">
                      <div class="buy-col col-three">
                        <div class="qty-pod text-center">
                          <strong class="d-block mb-2">Quantity</strong>
                          <div class="cart-quantity mb-2" data-key="{{ item.key }}">
                            <button class="btn btn-minus" type="button" aria-label="Decrease quantity">-</button>
                            <input
                              class="qty-input"
                              type="text"
                              name="updates[{{ item.key }}]"
                              value="{{ item.quantity }}"
                              inputmode="numeric"
                              pattern="[0-9]*"
                              aria-label="Quantity for {{ item.product.title }}"
                              />
                            <button class="btn btn-plus" type="button" aria-label="Increase quantity">+</button>
                          </div>
                          <div class="line-total"><strong>Line Total:</strong> {{ item.final_line_price | money }}</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              {% endfor %}

            {% endif %}
          </div>

          <div class="col-lg-3">
            <div class="order-summary">
              <h4 class="summary-title fw-bold" style="color:var(--primary-color);">Order Summary</h4>
              <ul>
                <li>
                  <strong style="color:var(--primary-color);">Subtotal</strong>
                  <span>{{ cart.items_subtotal_price | money }}</span>
                </li>

                {% if shop.taxes_included %}
                  <li><em>Tax included. Shipping calculated at checkout.</em></li>
                {% else %}
                  <li><em>Taxes and shipping calculated at checkout.</em></li>
                {% endif %}
              </ul>

              {% if cart.item_count > 0 %}
              <div class="terms-pod mb-3" data-terms>
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" id="certifyAge">
                  <label class="form-check-label" for="certifyAge">
                    I have read and agree to the Puppys R Us Health Guarantee.
                  </label>
                </div>

                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" id="understandTerms">
                  <label class="form-check-label" for="understandTerms">
                    I confirm I am 18+ and agree to the Puppys R Us Terms & Conditions.
                  </label>
                </div>

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="acknowledgeAgreement">
                  <label class="form-check-label" for="acknowledgeAgreement">
                    I understand I must take my puppy to a licensed veterinarian within 72 hours of receiving him/her.
                  </label>
                </div>

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="acknowledgeAgreement1">
                  <label class="form-check-label" for="acknowledgeAgreement1">
                    I understand my puppy will travel by safe, approved methods arranged by Puppys R Us, and I will be contacted to confirm details.
                  </label>
                </div>

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="acknowledgeAgreement2">
                  <label class="form-check-label" for="acknowledgeAgreement2">
                   I confirm I am purchasing the puppy listed in my order summary.
                  </label>
                </div>

              </div>
              <input  id="checkoutBtn" type="submit" name="checkout" class="btns-cart mb-3 w-100 d-flex align-items-center justify-content-center gap-2 is-disabled"  disabled aria-disabled="true" value="{{ 'cart.checkout' | t }}">
              <img class="w-100" src="{{ 'cards.png' | asset_url }}" alt="Payment methods">
              {% endif %}
            </div>
          </div>
        </div>
      </form>
    </div><!-- /.buy-pod-inner -->
  </div><!-- /.container -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', function(){
    // Quantity +/- and auto-submit
    const form = document.querySelector('.cart-form');
    const debouncedSubmit = (() => {
      let t;
      return () => { clearTimeout(t); t = setTimeout(()=>form.requestSubmit(), 350); }
    })();

    document.querySelectorAll('.cart-quantity').forEach((wrap)=>{
      const minus = wrap.querySelector('.btn-minus');
      const plus  = wrap.querySelector('.btn-plus');
      const input = wrap.querySelector('.qty-input');

      plus.addEventListener('click', ()=>{
        const v = parseInt(input.value || '0', 10) + 1;
        input.value = Math.max(0, v);
        debouncedSubmit();
      });

      minus.addEventListener('click', ()=>{
        const v = parseInt(input.value || '0', 10) - 1;
        input.value = Math.max(0, v);
        debouncedSubmit();
      });

      input.addEventListener('input', ()=>{
        const cleansed = input.value.replace(/\D+/g,'');
        input.value = cleansed === '' ? '0' : cleansed;
        debouncedSubmit();
      });
    });

    // Gate checkout until all three boxes are ticked
    const checks = [
      document.getElementById('certifyAge'),
      document.getElementById('understandTerms'),
      document.getElementById('acknowledgeAgreement'),
      document.getElementById('acknowledgeAgreement1'),
      document.getElementById('acknowledgeAgreement2')
    ].filter(Boolean);

    const checkoutBtn = document.getElementById('checkoutBtn');
    function syncCheckoutState(){
      if(checks.length === 0 || checks.every(cb => cb.checked)){
        checkoutBtn?.classList.remove('is-disabled');
        checkoutBtn?.removeAttribute('disabled');
        checkoutBtn?.setAttribute('aria-disabled','false');
      } else {
        checkoutBtn?.classList.add('is-disabled');
        checkoutBtn?.setAttribute('disabled','disabled');
        checkoutBtn?.setAttribute('aria-disabled','true');
      }
    }
    checks.forEach(cb => cb.addEventListener('change', syncCheckoutState));
    syncCheckoutState();
  });
  </script>

</section>
<div class="waves_separator_svg">
<svg width="100%" role="presentation" height="7vw" viewBox="0 0 1280 140" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
    <g fill="var(--theme-light)">
      <path d="M1280 86c-19.9-17.21-40.08-39.69-79.89-39.69-57.49 0-56.93 46.59-115 46.59-53.61 0-59.76-39.62-115.6-39.62C923.7 53.27 924.26 87 853.89 87c-89.35 0-78.74-87-188.2-87C554 0 543.95 121.8 423.32 121.8c-100.52 0-117.84-54.88-191.56-54.88-77.06 0-100 48.57-151.75 48.57-40 0-60-12.21-80-29.51v54H1280z"></path>
    </g>
  </svg>
</div>

<!--<section class="w-full bg-bg-extralight pt-8">

  <div class="rounded-top-left w-full bg-bg-light rounded-none rounded-tl-[12.5vw] py-16 ms-[4vw]" style="padding-bottom: 200px; margin-bottom: -200px;">
  
    <div class="max-w-[var(--width-container-content)] mx-auto">


      <h1 class="text-center font-bold mb-8 text-4xl sm:text-5xl md:text-6xl lg:text-7xl 2xl:text-8xl">{{ 'cart.title' | t }}</h1>

      <form action="{{ routes.cart_url }}" method="post">
        
          {% for item in cart.items %}

          
          <div class="grid grid-cols-1 gap-6 md:[grid-template-columns:175px_1fr_auto] items-start py-6 border-b border-black/10">

            <div class="w-full max-w-full md:max-w-[175px] overflow-hidden rounded-[1.25rem] shadow-[-8px_8px_0_0_var(--color-primary)]">
              {% render 'image', image: item.image, url: item.url %}
            </div>
            
           
            <div class="space-y-1 title-here">
            {% assign dob_val = item.product.metafields.custom.dob.value %}
            {% assign dob_ts = dob_val | date: "%s" | plus: 0 %}
            {% assign now_ts = 'now' | date: "%s" | plus: 0 %}
            {% assign diff_seconds = now_ts | minus: dob_ts %}
            {% assign weeks_old = diff_seconds | divided_by: 604800 %}

            <code>#{{ item.sku }}</code>

            <h2 class="font-bold text-4xl">{{ item.product.title }}</h2>
            <p>{{ item.product.collections.first.title }}</p>
            <p>{{ item.product.metafields.custom.sex }} - {{ weeks_old | floor }} Weeks Old</p>
            </div>

          
            <div class="text-left md:text-right space-y-3">
              <div class="font-semibold">{{ item.line_price | money }}</div>
              <div>{{ 'cart.remove' | t | link_to: item.url_to_remove }}</div>
            </div>
          </div>
          {% endfor %}


        <input type="submit" name="checkout" value="{{ 'cart.checkout' | t }}">
      </form>
    </div>
  </div>
</section>-->
{% schema %}
{
  "name": "t:general.cart",
  "settings": []
}
{% endschema %}
